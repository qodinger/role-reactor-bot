# =============================================================================
# Role Reactor Bot Configuration
# =============================================================================
# Copy this file to .env and fill in your values

# =============================================================================
# DISCORD CONFIGURATION (REQUIRED)
# =============================================================================

# Discord Bot Token [REQUIRED]
# Get from https://discord.com/developers/applications
DISCORD_TOKEN=your_bot_token_here

# Discord Application Client ID [REQUIRED]
DISCORD_CLIENT_ID=your_client_id_here

# Target Guild ID [OPTIONAL]
# If set, commands deploy only to this guild (faster for development)
DISCORD_GUILD_ID=your_guild_id_here

# Developer IDs [OPTIONAL]
# Comma-separated list of Discord user IDs for developer commands
DISCORD_DEVELOPERS=

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# MongoDB Connection URI [OPTIONAL]
# Examples:
# - Atlas: mongodb+srv://username:password@cluster.mongodb.net/role-reactor-bot?retryWrites=true&w=majority
# - Local: mongodb://localhost:27017
# - Leave empty for local files only
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/role-reactor-bot?retryWrites=true&w=majority

# MongoDB Database Name [OPTIONAL]
# Default: role-reactor-bot
MONGODB_DB=role-reactor-bot

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================
# Storage is automatically managed:
# - MongoDB when available (preferred)
# - Local files in ./data directory as fallback

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log Level [OPTIONAL]
# Options: ERROR, WARN, INFO, DEBUG
# Default: INFO
LOG_LEVEL=INFO

# Log File Path [OPTIONAL]
# If set, logs written to this file in addition to console
LOG_FILE=./logs/bot.log

# Enable Console Logging [OPTIONAL]
# Default: true
LOG_CONSOLE=true

# =============================================================================
# AI FEATURES (OPTIONAL)
# =============================================================================

# Bot Website URL [OPTIONAL]
# Used for API identification
BOT_WEBSITE_URL=https://github.com/your-repo/role-reactor-bot

# Bot Name [OPTIONAL]
# Used for API identification
BOT_NAME=Role Reactor Bot

# =============================================================================
# PAYMENT INTEGRATIONS (OPTIONAL)
# =============================================================================

# Webhook Verification Token [OPTIONAL]
WEBHOOK_TOKEN=your_verification_token_here

# Coinbase Commerce API Key [OPTIONAL]
COINBASE_API_KEY=your_api_key_here

# Coinbase Commerce Webhook Secret [OPTIONAL]
COINBASE_WEBHOOK_SECRET=your_webhook_secret_here

# Enable Cryptocurrency Payments [OPTIONAL]
# Default: false
COINBASE_ENABLED=false

# =============================================================================
# WEBSITE AUTHENTICATION (OPTIONAL)
# =============================================================================

# Discord OAuth2 Client Secret [OPTIONAL]
# Required for website Discord login
DISCORD_CLIENT_SECRET=your_client_secret_here

# Bot Website URL [OPTIONAL]
# Used for OAuth redirects
BOT_URL=https://your-website.com

# Session Secret [OPTIONAL]
# Random string for session encryption
# Generate with: openssl rand -base64 32
SESSION_SECRET=your_random_secret_here

# Serve Static Files [OPTIONAL]
# Default: false
SERVE_STATIC=false

# =============================================================================
# AI API KEYS (OPTIONAL)
# =============================================================================
# Provider selection is configured in src/config/config.js
# At least one provider must be enabled for AI features to work

# OpenRouter API Key [OPTIONAL]
# Get from https://openrouter.ai/keys
# Provides access to OpenAI models (gpt-4o-mini) and others
OPENROUTER_API_KEY=your_openrouter_api_key_here

# Stability AI API Key [OPTIONAL]
# Get from https://platform.stability.ai/account/keys
STABILITY_API_KEY=your_stability_api_key_here

# ComfyUI/ComfyICU API URL [OPTIONAL]
# For ComfyICU: https://comfy.icu (NOT api.comfy.icu)
# For self-hosted ComfyUI: http://127.0.0.1:8188
# For RunPod: Your RunPod proxy URL (e.g., https://xxxxx.proxy.runpod.net)
COMFYUI_API_URL=https://comfy.icu

# ComfyUI/ComfyICU API Key [OPTIONAL]
# Required for ComfyICU, optional for self-hosted/RunPod
COMFYUI_API_KEY=your_comfyui_api_key_here

# ComfyICU Workflow ID [OPTIONAL]
# Required for ComfyICU - get from your workflow settings in ComfyICU dashboard
# Not needed for standard ComfyUI (workflow is built automatically)
COMFYUI_WORKFLOW_ID=your_workflow_id_here

# ComfyUI Model Configuration [OPTIONAL]
# The checkpoint model to use for image generation
# Use the exact filename as it appears in ComfyUI (with .safetensors extension)
# 
# ANIME MODELS (require --nsfw flag):
# - "animagine-xl-4.0-opt.safetensors" (Animagine XL 4.0, recommended)
# - "AnythingXL_xl.safetensors" (Anything XL, uncensored)
# 
# REALISTIC MODELS:
# - "realismEngineSDXL_v30VAE.safetensors" (Photorealistic)
# 
# Default: animagine-xl-4.0-opt.safetensors (best quality)
COMFYUI_MODEL=animagine-xl-4.0-opt.safetensors

# ComfyUI Workflow Type [OPTIONAL]
# Which workflow to use by default for anime models
# Options: anime-nsfw, anime-nsfw-fast, anime-nsfw-precision
COMFYUI_NSFW_WORKFLOW=anime-nsfw

# RunPod Serverless Configuration [OPTIONAL]
# For using RunPod Serverless endpoints with ComfyUI
# Get your API key from https://www.runpod.io/console/user/settings
# Get your endpoint ID from https://www.runpod.io/console/serverless
RUNPOD_API_KEY=your_runpod_api_key_here
RUNPOD_ENDPOINT_ID=your_endpoint_id_here
RUNPOD_CHECKPOINT=sd_xl_base_1.0.safetensors

# =============================================================================
# AI RATE LIMITING (OPTIONAL)
# =============================================================================

# AI User Rate Limit [OPTIONAL]
# Maximum requests per user per time window
# Default: 50
AI_USER_RATE_LIMIT=50

# AI User Rate Limit Window [OPTIONAL]
# Time window in milliseconds
# Default: 60000 (1 minute)
AI_USER_RATE_LIMIT_WINDOW=60000

# AI Max Concurrent Requests [OPTIONAL]
# Maximum simultaneous requests across all users
# Recommended values:
#   - Local ComfyUI (CPU/MacBook): 1-2
#   - Local ComfyUI (GPU): 2-4
#   - Cloud ComfyUI (RunPod/server): 2-4 per GPU
#   - Cloud APIs (OpenRouter, Stability): 10-50 (depends on API limits)
# Default: 100 (too high for local ComfyUI - adjust based on your setup)
AI_MAX_CONCURRENT=100

# AI Request Timeout [OPTIONAL]
# Maximum time to wait for AI generation requests (in milliseconds)
# Increased to 5 minutes (300000ms) for ComfyUI high-resolution image generation
# ComfyUI can take longer for large images (1024x1024+), especially on CPU/M1 Macs
# Default: 300000 (5 minutes)
AI_REQUEST_TIMEOUT=300000

# =============================================================================
# AI CONVERSATION SETTINGS (OPTIONAL)
# =============================================================================

# AI Use Long-Term Memory [OPTIONAL]
# Enable persistent conversation storage (survives bot restarts)
# Default: false
AI_USE_LONG_TERM_MEMORY=false

# AI Conversation Storage Type [OPTIONAL]
# Options: "file" (default), "mongodb", "memory"
# Default: file
AI_CONVERSATION_STORAGE_TYPE=file

# AI Image Jobs Storage Type [OPTIONAL]
# Options: "file" (default), "mongodb"
# Default: file
AI_IMAGE_JOBS_STORAGE_TYPE=file

# AI Image Jobs Retention Days [OPTIONAL]
# Days to keep job history before cleanup
# Default: 7 (set to 0 to disable auto-deletion)
AI_IMAGE_JOBS_RETENTION_DAYS=7

# AI Conversation History Length [OPTIONAL]
# Maximum number of messages to keep per conversation (per user/server)
# Example: If set to 20, each user's conversation keeps the last 20 messages
# Default: 20
AI_CONVERSATION_HISTORY_LENGTH=20

# AI Conversation Timeout [OPTIONAL]
# Time in milliseconds before conversation is considered inactive
# Default: 604800000 (7 days) for LTM, 900000 (15 minutes) for in-memory
AI_CONVERSATION_TIMEOUT=604800000

# AI Max Conversations [OPTIONAL]
# Maximum number of different conversations (users/servers) to keep in memory simultaneously
# Example: If set to 1000, bot can handle 1000 different users/servers at once
# Default: 1000
AI_MAX_CONVERSATIONS=1000